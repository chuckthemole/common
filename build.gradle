/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/7.5.1/samples
 */

plugins {
    // Apply the java-library plugin for API and implementation separation.
    // id 'java-library'
    // id 'visual-studio'
    id 'rumpus'
    id 'rumpus.library-conventions'
    id 'maven-publish'
    id 'org.springframework.boot' version '3.0.1'
	id 'io.spring.dependency-management' version '1.1.0'
    id 'org.siouan.frontend-jdk11' version '6.0.0'
}

// https://stackoverflow.com/questions/56861256/gradle-build-failed-main-class-name-has-not-been-configured-and-it-could-not-be
bootJar {
    enabled = false
}
jar {
    enabled = true
}

group = 'com.rumpus-common'
version = '1.0'
sourceCompatibility = '17'

repositories {
    // Use Maven Central for resolving dependencies.
    mavenCentral()
    gradlePluginPortal()
}

dependencies {
    // This dependency is exported to consumers, that is to say found on their compile classpath.
    api 'org.apache.commons:commons-math3:3.6.1'

    // This dependency is used internally, and not exposed to consumers on their own compile classpath.
    implementation 'com.google.guava:guava:31.0.1-jre'

    implementation('org.springframework.boot:spring-boot-starter:3.0.1')
    implementation('org.springframework.boot:spring-boot-starter-web:3.0.1') // Enables and configures Spring MVC
    
    // DB dependencies
    // implementation('org.springframework.data:spring-data-bom:2022.0.0')
    implementation('org.springframework.boot:spring-boot-starter-jdbc:3.0.1')
    implementation('mysql:mysql-connector-java:8.0.31')

    // Spring Boot dev tools
    implementation('org.springframework.boot:spring-boot-devtools:3.0.1')

    implementation('org.springframework.boot:spring-boot-starter-thymeleaf:3.0.1')
    implementation('org.webjars:bootstrap:5.2.3')

    // Testing
	testImplementation('org.springframework.boot:spring-boot-starter-test')
    testImplementation('org.junit.jupiter:junit-jupiter-api:5.8.1')
    testRuntimeOnly('org.junit.jupiter:junit-jupiter-engine:5.8.1')

    // kong
    implementation('com.konghq:unirest-java:3.11.13')

    // ? 
    implementation('org.springframework.boot:spring-boot-starter-actuator')

    // JS
    // implementation('com.github.eirslett:frontend-maven-plugin:1.12.1')
}

testing {
    suites {
        // Configure the built-in test suite
        test {
            // Use JUnit Jupiter test framework
            useJUnitJupiter('5.8.2')
        }
    }
}

tasks.withType(Test) { 
    testLogging {
        exceptionFormat "full"
        events "started", "skipped", "passed", "failed"
        showStandardStreams true
    }
}

// publishing {
//     publications {
//         create<MavenPublication>("rumpusLibrary") {
//             groupId = "com.rumpus.common"
//             artifactId = "library"
//             version = "1.1"

//             from(components["java"])
//         }
//     }

//     repositories {
//         maven {
//             name = "myRepo"
//             url = uri(layout.buildDirectory.dir("repo"))
//         }
//     }
// }
